import numpy as npfrom astropy.cosmology import WMAP9import astropy.units as ufrom astropy.constants import c,L_sunfrom copy import deepcopyc = c.valueL_sun = L_sun.valuedef find_nearest(array,value):    idx = (np.abs(np.array(array)-value)).argmin()    return idxdef get_luminosity(Lambdas=None,lum=None):    wave = deepcopy(Lambdas)    lum = deepcopy(lum)    if hasattr(lum,'unit') == False:        lum = lum * u.erg / u.s    if hasattr(wave, 'unit') == False:        wave = wave * u.micron        lir1 = find_nearest(wave, 8)    lir2 = find_nearest(wave, 1000.)        lum_ir = np.trapz(lum[lir1:lir2]/wave.to(u.cm)[lir1:lir2] , wave.to(u.cm)[lir1:lir2])    return lum_ir.to(u.L_sun)    